<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Äang báº­n!</title>
<style>
  body {
    background-color: black; color: lime; font-family: monospace;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    height: 100vh; text-align: center; padding: 20px;
  }
  h1 { color: red; animation: blink 1s infinite; }
  @keyframes blink { 0% {opacity: 1;} 50% {opacity: 0;} 100% {opacity: 1;} }
  /* Äá»“ng há»“ gÃ³c pháº£i hiá»ƒn thá»‹ trÃªn cáº£ trang nháº­p tÃªn vÃ  sau Ä‘Ã³ */
  #datetime {
    position: fixed; bottom: 10px; right: 20px;
    color: white; font-size: 14px; z-index: 9999;
  }
  input {
    padding: 5px; font-size: 14px; background: black; color: lime;
    border: 1px solid lime; text-align: center;
  }
  button { padding: 5px 10px; background: lime; color: black; border: none; cursor: pointer; }
  button:hover { background-color: red; color: white; }
</style>
</head>
<body>

  <div id="formContainer">
    <h1>Nháº­p tÃªn cá»§a báº¡n</h1>
    <form id="nameForm">
      <input type="text" id="nameInput" placeholder="TÃªn cá»§a báº¡n..." required>
      <button type="submit">XÃ¡c nháº­n</button>
    </form>
  </div>

  <div id="content" style="display:none;">
    <h1 id="title">ğŸ’¤NGá»¦ ÄI ğŸ’¤</h1>
    <p>...<span id="dots"></span></p>
    <!-- ÄÃƒ Bá» Ä‘á»“ng há»“ khá»i Ä‘Ã¢y Ä‘á»ƒ nÃ³ hiá»ƒn thá»‹ cáº£ trÃªn trang nháº­p tÃªn -->
  </div>

  <!-- Äáº·t Ä‘á»“ng há»“ ngoÃ i má»i khá»‘i Ä‘á»ƒ luÃ´n hiá»ƒn thá»‹ -->
  <div id="datetime"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD962crs2BgxZIRQVYroUH4Ih4vL3VI_48",
      authDomain: "hihi-3c544.firebaseapp.com",
      databaseURL: "https://hihi-3c544-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "hihi-3c544",
      storageBucket: "hihi-3c544.firebasestorage.app",
      messagingSenderId: "799975042765",
      appId: "1:799975042765:web:d23ead7aa29deffcc0c384",
      measurementId: "G-W5FLH85R0R"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth(app);
    signInAnonymously(auth).catch(console.error);

    document.getElementById("nameForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const ten = document.getElementById("nameInput").value.trim();
      if (!ten) return;

      const payload = { name: ten, time: new Date().toLocaleString('vi-VN'), createdAt: Date.now() };

      try {
        await push(ref(db, "names"), payload);
        document.getElementById("title").textContent = `âš ï¸ ${ten.toUpperCase()}, NGá»¦ ÄI âš ï¸`;
        document.getElementById("formContainer").style.display = "none";
        document.getElementById("content").style.display = "block";
      } catch (err) {
        alert("KhÃ´ng lÆ°u Ä‘Æ°á»£c dá»¯ liá»‡u. Thá»­ láº¡i nhÃ©!");
        console.error(err);
      }
    });

    // Hiá»‡u á»©ng cháº¥m
    let dots = document.getElementById('dots');
    setInterval(() => {
      dots.textContent += '.';
      if (dots.textContent.length > 10) dots.textContent = '';
    }, 300);

    // Äá»“ng há»“ gÃ³c dÆ°á»›i bÃªn pháº£i â€“ cháº¡y ngay khi má»Ÿ trang
    function updateDateTime() {
      const now = new Date();
      document.getElementById('datetime').textContent = now.toLocaleString('vi-VN', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
        hour: '2-digit', minute: '2-digit', second: '2-digit'
      });
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);
  </script>

</body>
<!-- Nháº¡c ná»n -->
<audio id="bgm" autoplay loop>
  <source src="music.m4a" type="audio/mp4">
  TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ tháº» audio.
</audio>
<script>
  const bgm = document.getElementById('bgm');
  bgm.volume = 1; // Ã‚m lÆ°á»£ng máº·c Ä‘á»‹nh 100%

  // Náº¿u autoplay bá»‹ cháº·n (trÃ¬nh duyá»‡t yÃªu cáº§u tÆ°Æ¡ng tÃ¡c), phÃ¡t láº¡i khi click
  document.addEventListener('click', () => {
    if (bgm.paused) bgm.play().catch(()=>{});
  }, { once: true });
</script>

</html>
